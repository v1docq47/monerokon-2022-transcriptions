# Джастин Берман

_**Джастин Берман - Seraphis и Jamtis: обзор предлагаемых изменений протокола Monero**_

_Monero Konferenco  #MoneroKon2022 Day 2_

[https://youtu.be/o6IL9uCzI30](https://youtu.be/o6IL9uCzI30)

---

Сегодня я буду говорить о Seraphis и Jamtis, текущих обновлениях основных функций Monero. И данная презентация представляет собой высокоуровневый обзор изменений, которые повлияют на пользователей, и разъясняет, что пользователям следует ожидать, что произойдёт в результате реализации этих обновлений, на довольно высоком уровне. Я не буду слишком углубляться в технические аспекты и постараюсь оставаться на более высоком уровне. Это та же самая презентация, с которой я выступал на MoneroKon, но я решил повторить её, сопроводив слайдами, и надеюсь, по мере того, как мы будем двигаться дальше, вам всё будет понятней.

Итак, предыстория создания протокола Seraphis и мотивация для его реализации. Как работает Monero. Одно из основных приватных свойств, один из трёх столпов обеспечения приватности называется «кольцевыми подписями». Кольцевые подписи используются для обеспечения приватности отправителя. Когда я отправляю кому-то Monero, кольцевые подписи гарантируют, что моя транзакция не будет связана с другой транзакцией или отслежена. Я создаю кольцевую подпись, которая использует другие, прошлые транзакции из блокчейна и ссылается на определённое количество таких транзакций. Сегодня, их количество в подписи составляет 16, то есть, 15 других транзакций в каждой подписи в транзакции. Так что, по сути, это одна из основных, ключевых функций, обеспечивающих приватность на уровне отправителя, и поэтому не прекращаются исследования, целью которых является увеличение этого количества с 16 до чего-то потенциально гораздо большего при условии сохранения приемлемой масштабируемости и эффективности.

Triptych был одним из аспектов или одним из направлений исследований, которые начались в 2020 и 2021 годах, и в результате которых выяснилось, что мы можем использовать кольца большего размера. Но, к сожалению, при реализации оказалось, что multisig-подписи не очень хороши с пользовательской точки зрения. Так что, это направление работы понемногу сошло на нет.

В 2021 году появился Lelantus Spark, который в настоящее время продвигается Firo. В этом случае вы получаете положительные свойства колец большого размера и хорошую схему multisig.

Seraphis разрабатывался ведущим разработчиком Monero, и тоже поддерживает кольца большого размера, схему multisig и новый протокол модульных транзакций, разработанный специально для Monero, а также предлагает новые возможности, о которых мы поговорим позже.

А затем, вскоре после Seraphis появилась схема Jamtis, предложенная tevador, который в прошлом также занимался разработкой различных возможностей RandomX и Polyseed для Monero. Итак, Jamtis — это набор хорошо продуманных обновлений основных функций Monero, которые могут поддерживаться наряду с Seraphis, и мы также рассмотрим их позже.

Теперь кратко о том, что я собираюсь обсудить. Эти восемь пунктов — далеко не всё, что предлагают Seraphis и Jamtis. Это то, что я лично выбрал в качестве самых больших или самых значимых изменений, достойных особого внимания. Но их гораздо больше, чем мы рассмотрим, и это просто моё личное мнение в отношении их важности. Поэтому, предлагаю рассмотреть эти возможности их по очереди.

Итак, начнём с ключа просмотра баланса. Это приватный ключ, который можно использовать для просмотра всех входящих и исходящих средств. Сегодня Monero использует ключ просмотра и ключ траты. Ключ просмотра позволяет увидеть только входящие средства, но криптографически не допускает просмотра исходящих средств. Для этого нужен ключ траты, который также используется для траты ваших денег.

Плюсы ключа просмотра баланса. Этот ключ позволяет создать полнофункциональный и более безопасный кошелёк, предназначенный исключительно для просмотра. Сегодня, если вы захотите кошелёк, который позволяющий только видеть средства, но не тратить их, то для использования такого кошелька будет необходимо постоянно обращаться к устройству подписи, на котором есть ключ траты и генерировать образы ключей на вашем кошельке, предназначенном для траты средств. То есть, чтобы иметь полнофункциональный кошелёк для просмотра, способный рассчитывать баланс и видеть исходящие средства, по сути, вы должны загрузить в память и использовать ключ траты. Поэтому, в принципе, это несколько проблематично с точки зрения безопасности — если вам приходится куда-либо загружать ключ траты, это открывает возможность для проведения атаки. Таким образом, ключ просмотра баланса — это то, что позволяет создавать кошелёк для просмотра, вообще не требующий использования ключа траты, способный рассчитать ваш баланс, и обладающий всеми необходимыми для этого возможностями.

Ключ просмотра баланса также улучшит все возможности подписания при наличии нескольких устройств, используемых для этого, включая подписание офлайн с помощью «холодного» кошелька, если у вас имеется кошелёк для просмотра, а также не подключённое к сети устройство, которое используется для подписания транзакций. Это может быть аппаратный кошелёк или multisig-кошелёк, предполагающий наличие нескольких участников, которые могут подписываться из разных мест с разных кошельков. Таким образом, ключ просмотра баланса улучшит всё это так, опять же, это пока что предварительная информация, улучшит так, что каждому подписывающему устройству будет необходимо отправлять образы ключей другим устройствам.

Например, вы — один из трёх участников схемы multisig, и вам нужно знать, какие средства уже были потрачены посредством multisig-кошелька, и вам нужно знать, каков ваш баланс. В рамках существующей системы multisig вам придётся обмениваться информацией со всеми участниками схемы multisig, обменяться образами ключей, и это позволит вам определить, каковыми были исходящие средства и каков ваш баланс, какие выходы можно подписывать, и как строить транзакции в будущем. По сути, ключ просмотра баланса устраняет необходимость в таком обмене информацией, и каждый пользователь будет знать, что было потрачено с помощью кошелька без какой-либо дополнительной связи. То же самое касается и вашего офлайн-кошелька, подписания с его помощью, и обмен информацией между аппаратным кошельком и устройством, машиной, на которой установлен ваш кошелёк, также сократится. Именно таким образом ключ просмотра баланса улучшает весь процесс в целом.

Спорный аспект, связанный с ключом просмотра баланса, заключается в наличии этого дополнительного ключа, при передаче которого сообщается больший объём криптографической информации, касающейся истории транзакций Monero, и люди уже выражали беспокойство по этому поводу.

Теперь я подробней остановлюсь на минусах, но при этом важно признать, что с помощью используемого сегодня ключа просмотра уже можно определить и сделать достаточно обоснованные предположения в отношении того, какие исходящие средства принадлежат пользователю. Нельзя создать криптографическую оболочку, гарантированно обеспечивающую криптографическую защиту, и поэтому мы не можем разрабатывать кошельки для просмотра, которые будут полностью функциональны и будут обеспечивать идеальный опыт взаимодействия с пользователем, и которые исключат подобные догадки. И сегодня кто-то, кто осуществляет наблюдение, или кто-то, кто имеет доступ к ключу просмотра, может прийти к довольно обоснованным выводам в отношении того, какие средства тратит пользователь, просто воспользовавшись таким ключом просмотра. Это важно отметить и принимать во внимание, когда мы обсуждаем свойства, связанные с обеспечением приватности с помощью ключа просмотра баланса, и то, что он позволит сделать в сравнении с используемым сегодня ключом просмотра.

И, наконец, я перейду к лёгким кошелькам, обладающим более сильными приватными свойствами, и это отдельный аспект, который также позволяет смягчить последствия сбора ключей просмотра и всего прочего. И об этом мы поговорим чуть позже.

Итак, минусы ключа просмотра баланса. Рассмотрим их подробнее. Как только используемый размер кольца станет обязательным, и после того, как размер кольца значительно увеличится, а в будущем, после гипотетического внедрения Seraphis у нас появятся кольца большего размера, тогда ключ просмотра баланса станет более мощным инструментом наблюдения, чем ключ просмотра, который позволяет видеть только входящие средства. Ведь тогда построение действительно обоснованных предположений в отношении баланса пользователя, его исходящих средств, станет более сложным. И с этой точки зрения можно сказать, что ключ просмотра баланса хуже, чем ключ просмотра, используемый на данный момент.

Есть два возможных крайне негативных последствия того, что позволяет сделать ключ просмотра баланса. Во-первых, допустим, вас обяжут обмениваться ключами просмотра баланса — например, для того, чтобы воспользоваться услугами биржи, вы будете должны поделиться своим ключом просмотра баланса. И это, безусловно, повод для беспокойства. Но также следует иметь в виду, что такая ситуация вероятна уже сегодня, когда пользователей можно заставить передать свой ключ просмотра, а также все подписанные образы ключей, которые затем можно использовать, чтобы узнать их исходящие средства, то есть, криптографически раскрыть исходящие средства пользователя. Так что, по сути, если мы говорим о том, что кто-то, обладающий определёнными полномочиями, когда-то потребует передачи ключа просмотра баланса, нет никаких причин исключить вариант, при котором то же самое не будет сделано в отношении пользователя уже сегодня, что его не вынудят передать ключ просмотра, находящийся внутри образа ключа. Но пока это не делается. Так что, это просто следует иметь в виду: ключи просмотра баланса, безусловно, дают большую власть, и трудно сказать, насколько стоит об этом беспокоиться.

И второе последствие — существуют централизованные сервисы, кошельки, которые могут заниматься сбором этих ключей просмотра баланса, чтобы пользователи смогли мгновенно загружать свои кошельки. Это ещё одна из проблем, которая нами решается, и я расскажу об этом в следующей части, и, надеюсь, с помощью Seraphis и Jamtis будет создан новый уровень, благодаря которому децентрализованный кошелёк также можно будет загрузить мгновенно, не предоставляя свой ключ просмотра баланса. Об этом мы также поговорим чуть позже.

Итак, лёгкие кошельки с более высоким уровнем приватности также поддерживаются Jamtis. В Monero, чтобы определить, какие транзакции принадлежат вам, ваш кошелёк должен просканировать весь блокчейн с момента его последнего открытия и попытаться расшифровать каждую транзакцию, чтобы увидеть, какие из них принадлежат вам, а какие транзакции были входящими и были потрачены вами в блокчейне. Поэтому, если вы давно не пользовались своим кошельком, данный процесс может занять достаточно много времени. То есть, это полностью зависит от того, когда вы в последний раз пользовались своим кошельком.

Лёгкие кошельки, по сути, переносят процесс сканирования на отдельное устройство. Так что вы можете использовать свой телефон в качестве лёгкого кошелька, лёгкого мобильного кошелька, а у себя дома наряду со своим узлом вы можете запустить сервер, называемый сервером лёгкого кошелька, который будет постоянно сканировать блокчейн на предмет наличия ваших транзакций. Таким образом, когда вы откроете свой лёгкий кошелёк, он укажет на ваш домашний сервер, непрерывно сканирующий блокчейн и мгновенно загружающий информацию, и вы сможете сразу же воспользоваться устройством и потратить свои деньги, не дожидаясь, пока оно просканирует блокчейн.

Существует несколько вариантов реализации сервера лёгкого кошелька с открытым исходным кодом, monero-lws — один из них, созданный vtnerd, другой вариант — openmonero от moneroexamples. По сути, принцип работы лёгких кошельков заключается в том, что на них хранится ваш ключ просмотра. Они хранят ключ просмотра на соответствующем устройстве и используют его для идентификации всех полученных выходов, всех транзакций, в которых пользователь получил Monero, а также позволяют видеть суммы, передаваемые в этих транзакциях.

Таким образом, предлагаемое усовершенствование лёгких кошельков сводится к созданию собственного сервера, который не сможет видеть сумм, получаемых или потраченных в транзакциях, а также не сможет точно определить, какие из выходов принадлежат пользователю. В Seraphis выходы называются enote, и именно этим термином мы обозначаем их. Таким образом, пока пользователь не использует адрес для получения Monero, сервер не сможет ничего определить, поскольку при использовании лёгкого кошелька у сервера получится идентифицировать полученные выходы, только если пользователь использует адрес повторно. Работа над этим механизмом ещё не закончена, и поэтому, безусловно, мы ценим и уделяем пристальное внимание всем отзывам, и нам бы хотелось, чтобы ещё больше людей присоединилось к обсуждению.

Теперь подробнее рассмотрим все плюсы и минусы. Итак, идея состоит в том, чтобы с помощью сервера лёгкого кошелька обеспечить мгновенную загрузку такого кошелька, возможность мгновенного использования, чтобы он был готов к работе, как только вы откроете его на своём телефоне. При этом должна обеспечиваться приватность — сервер не должен ничего точно знать, не должен видеть суммы и полученных выходов. Это также создаёт угрозу со стороны большой централизованного сервера лёгкого кошелька в отношении анонимной группы. Так, например, сегодня у нас есть mymonero, сервер которого имеет доступ к ключам просмотра ряда пользователей, который может видеть и идентифицировать транзакции, принадлежащие пользователю, и позволяет составить представление о его расходах. Принцип работы Monero состоит в наличии большой анонимной группы, и когда вы создаёте транзакцию, при создании своей кольцевой подписи вы ссылаетесь на транзакции других людей из блокчейна, и это гарантирует, что никто, взглянув на вашу транзакцию, не сможет определить, какой из выходов Monero вы тратите в своей транзакции. Но если бы существовала какая-то сторона, которой был бы известен большой процент транзакций в блокчейне, и она могла бы построить граф связей между транзакциями, то если бы вы попытались сослаться на одну из таких транзакций, то такая сторона смогла бы её исключить, поскольку ей было бы известно, что она вам точно не принадлежит. Так что, при наличии стороны, которой известно, какие из трат принадлежат другим пользователям, размер анонимной группы серьёзно сокращается.

Таким образом, если мы сможем создать сервер лёгкого кошелька, который будет лишь ограниченно видеть, как пользователи тратят деньги, будет обладать ограниченной информацией, меньшим объёмом информации, не позволяющим точно определить связь между пользователями и между транзакциями, это снизит вероятность сокращения сервером лёгкого кошелька размера анонимной группы. И пока это действительно является минусом данного уровня. Но я лично очень рад, что такой уровень существует, поскольку мне нравится идея запуска сервера лёгкого кошелька дома не только для себя, но также для своей семьи и друзей, что, по сути, является реализацией модели «дяди Джима». Спасибо Diverter, который через Twitter, а также на Guns N Bitcoin в своей презентации затронул эту тему. Идея модели «дяди Джима» состоит в том, что в вашем сообществе есть некто, управляющий инфраструктурой, у кого есть для этого необходимые технические знания, кто может поддерживать узел, разместить сервер вместе с этим узлом и запустить его. И тогда близкие этому человеку люди, близкие «дяде Джиму», могут просто указать своим кошелькам на этот сервер. Так что, я думаю, такая идея является довольно мощной с точки зрения масштабирования, децентрализации и, по сути, проекта Monero в целом. И я также считаю, что это путь к обеспечению оптимального UX для большинства пользователей.

Теперь о минусах этого уровня, уровня лёгкого кошелька. Во-первых, как я уже упоминал, если пользователь повторно использует адрес, он раскрывает серверу, какие выходы enote принадлежат этому адресу или были получены на него. Это довольно серьёзный минус, поскольку одним из основных приватных свойств Monero, один из столпов являются так называемые «скрытые адреса». Я могу опубликовать свой скрытый адрес где угодно в интернете и принимать на него пожертвования. И если на него будет получена какая-либо транзакция, когда кто-то переведёт Monero на этот скрытый адрес, никто, просмотрев блокчейн, не сможет узнать, что именно я получил эти Monero. И это огромное преимущество, обеспечиваемое скрытыми адресами, которое в значительной степени нейтрализуется лёгкими кошельками, потому что сервер лёгкого кошелька теперь будет знать об этом. Ему для этого не нужно будет сканировать блокчейн. Информация просто раскрывается такому серверу.

Кроме того, есть ещё один довольно важный аспект — это анализ по времени, позволяющий делать вполне хорошие предположения относительно траты и получения выходов. Это будут не точные предположения, но есть вероятность, что сервер, отслеживающий любое взаимодействие между серверами и со всеми пользователями, будет собирать информацию о пользователях, обращающихся к такому серверу, и позволит прийти к определённым выводам в отношении связи между транзакциями. Они не будут идеальными, они не будут криптографически точными, но такие предположения всё же будут правдоподобными, и поэтому, если вы обладаете необходимыми техническими знаниями, я настоятельно рекомендую создать собственный сервер лёгкого кошелька. Было бы идеально, если бы каждый использовал собственный сервер и собственный узел. Как бы то ни было, это дополнительный аспект, который следует учитывать на этом уровне.

И последний минус заключается в том, что если в транзакции имеется более двух выходов enote, это также позволяет серверу определить принадлежность этих выходов одному пользователю. Но мы можем избежать этого, решить эту проблему, и, возможно, в принципе её устранить. Но это однозначно принимается нами во внимание, особенно учитывая тот факт, который также является объёктом нашего пристального внимания, что возможны транзакции, в которых пользователи получают сразу множество выходов enote, или выводят их в рамках одной транзакции, и они могут потратить их, даже если будут проводить небольшую транзакцию в будущем. Так что, это необходимо учесть при работе с UX Monero. Итак, когда я получаю Monero, мне приходится ждать 10 блоков, чтобы потратить эти полученные мною Monero. Допустим, я получил в свой кошелек одну Monero, и мне необходимо её потратить. Мне придётся ждать эти 10 блоков. Теперь предположим, что я разделил полученную одну Monero на несколько выходов enote или, например, на 16, что является функцией, которая сегодня поддерживается некоторыми кошельками. Это pocket change, «карманными деньгами». Полагаю, Cake Wallet также поддерживает эту функцию. Это позволяет мне потратить некоторые выходы enote и оставить другие для траты в будущем. Таким образом, подобная возможность, обеспечиваемая лёгким кошельком, по сути, создаёт некоторые неудобства для пользователей, поскольку сервер сможет определить, что данные выходы enote принадлежат пользователю. Так что, на этом уровне данная проблема также должна учитываться.

Ещё один момент, достойный обсуждения. Третий пункт — новые адреса. Так как тенденция развивается в сторону большего размера колец, мы просто не сможем использовать образы. Нет способа, позволяющего обновить систему без перехода к новым адресам. Теперь о том, что это будет означать для пользователя.

Никому не придётся создавать новую мнемоническую фразу — все старые мнемонические фразы будут работать, как положено. Это первое. Средства, полученные в прошлом на любой старый адрес, всегда можно будет потратить. То есть, Monero, полученные в прошлом, можно будет потратить без каких-либо проблем. Единственное и самое значимое изменение заключается в том, что любые средства, отправленные в будущем после обновления, должны будут отправляться на совершенно новый адрес. И это основное изменение, которого следует ожидать пользователям.

Пока это ещё не окончательное решение, и вопрос адресов не решён окончательно. Есть ещё несколько моментов, которые по прежнему обсуждаются. Но это повлияет на то, как именно будут выглядеть адреса. Но в общих чертах они будут выглядеть вот так. Слева — старая схема построения адреса, которая, как вы видите, подразумевает наличие нескольких заглавных букв, а справа — более длинный адрес. Он включает в себя дополнительный публичный ключ, и он написан в кодировке base-32, то есть, как можно увидеть, это всё строчные буквы — его проще читать и легче копировать. По размеру разница велика. Пока это не точно, но примерно так будет выглядеть новый адрес в сравнении со старым.

Итак, переход на Seraphis означает, что после обновления мы перейдём к использованию новых адресов. Это даст нам уникальную возможность создать новую схему адресации, которая будет учитывать все замечания пользователей, которые высказывались на протяжении многих лет, а также все те проблемы, с которыми они сталкивались и на которые жаловались. То есть, мы попытались разработать надёжную схему адресов, которая учитывает и решает все те проблемы, с которыми пользователи сталкивались в прошлом. И Jamtis, по сути, и является решением. Именно эта идея побудила tevador к реализации многих, большинства обновлений, предлагаемых Jamtis.

Прежде всего, это упрощённая схема адресации. Сегодня в Monero используется три основных типа адресов — стандартный адрес, начинающийся с цифры 4, который по умолчанию является адресом кошелька, и подадреса, которые позволяют с помощью одного кошелька создавать новые подадреса для различных контрагентов. Допустим, вы заходите на биржу, хотите получить или снять свои деньги, и вы не хотите, чтобы адрес, который вы получили от биржи, был связан с таким контрагентом, который собирается отправить вам Monero. Поэтому вы создаёте новый подадрес, и этот подадрес не может быть связан с другим, и вы используете один кошелёк для хранения разных адресов. В этом и заключается основная идея подадресов. Также у нас есть интегрированные адреса, в конце которых имеется идентификатор платежа. Это позволяет предпринимателям присоединять уникальные идентификаторы платежа в конце адреса, чтобы подтвердить выполнение заказа, привязать платёж к конкретному заказу, и в то же время использовать один адрес, предварительно привязанный к идентификатору платежа, которому пользователи могут доверять. То есть, пользователи будут уверены, что они перечисляют средства именно тому продавцу, с которым имели дело в прошлом.

Итак, Jamtis предлагает устранить разницу между стандартными адресами и подадресами, реализовав единый адрес Jamtis, а затем заменить интегрированные адреса, с которыми связан целый ряд проблем, о которых я расскажу позже, на «сертифицированные» адреса, о которых мы также поговорим чуть позже.

Сегодня существуют проблемы с подадресами. Первая, которая, вероятно, является самой значительной, заключается в том, что подадреса уязвимы для атаки Януса. Данный вид атаки позволяет кому-то, даже если вы нег подозреваете, определиться, что именно вы являетесь владельцем определённого подадреса. Такой человек может перевести вам Monero и построить транзакцию таким образом, что если вы подтвердите получение Monero, вы передадите ему информацию согласно которой он поймёт, что вы владеете таким подадресом. И вы даже не будете знать, что передали такую информацию. И это довольно серьёзный вид атаки, связанный с подадресами, который просто невозможно выявить. И эту проблему решает наше обновление.

С подадресами связаны и другие проблемы. Создание подадресов требует отслеживания уже ранее созданных. И это также связано с ещё одним аспектом — автоматическим восстановлением средств, полученных на подадреса, которое не является достаточно надёжным. Итак, по сути, подадреса сегодня действуют по принципу увеличения своего номер. Например, вы создаёте первый подадрес — нулевой подадрес, а затем второй подадрес  под номером один, третий подадрес будет вторым. И так  генерируются новые подадреса. И это означает, что, допустим, у вас имеется устройство, с помощью которого было сгенерировало несколько подадресов для другого устройства, и если другое устройство не знает, что они были сгенерированы, то другой кошелёк или другая машина, по умолчанию не знает, что между ними нет связи, и можно считать, что это является проблемой. И вам приходится следить за тем, какие из подадресов уже были созданы, чтобы не использовать их повторно.

Опять же, существует проблема, связанная с надёжным автоматическим восстановлением. Ведь мы не можем точно знать, что пользователь, допустим, генерирует 3000 подадресов, а затем создаёт подадрес за номером 5000. Сегодня кошелёк восстанавливает средства, отправленные на подадрес, просматривая первые тысячи подадресов, которые были сгенерированы, и если есть один подадрес вне этого диапазона, на который были получены Monero, кошелёк не может по умолчанию определить, что средства были получены на этот подадрес. И пользователи уже сталкивались с определёнными проблемами, когда не могли вернуть средства, отправленные на подадрес.

Теперь что касается транзакций. Ещё одна, проблема, связанная с подадресами заключается в том, что когда вы создаёте транзакцию с тремя и более выходами и используете при этом подадреса, то это отображается в в блокчейне. То есть, вы можете сказать, что конкретный пользователь использовал подадреса при создании транзакции, взяв три и больше выходов. И поэтому, поскольку было использовано более трёх выходов, и поскольку задействуются подадреса, заглянув в блокчейн, вы можете увидеть, что при проведении транзакции были использованы подадреса.

И, наконец, поддержка подадресов требует дополнительной разработки, а это повышает сложность протокола. На сегодняшний день существуют кошельки, которые до сих пор не реализуют подадресов. И причина состоит исключительно в необходимости  дополнительной разработки.

Да, у нас есть ещё несколько вариантов. Но наилучшей практикой является использование нового подадреса с каждым новым контрагентом. То есть, это необходимо, если вы получаете Monero от разных людей, и не хотите при этом выдавать свой единственный адрес, а также не хотите делиться информацией с такими контрагентами, которые могут прийти к выводу, что вы получили средства на конкретный адрес, и две транзакции были совершены вами. Даже если такая информация не попадёт в блокчейн, благодаря использованию скрытых адресов и того, как работает Monero, такая информация всё равно нанесёт ущерб вашей приватности, а всё потому, что вы просто не используете подадреса при совершении транзакций с разными контрагентами.

И я бы сказал, что наличие стандартного адреса, который генерируется по умолчанию, и является основным адресом, некоторым образом усугубляет проблему, поскольку пользователя в некотором роде поощряют использовать такой основной, стандартный адрес, с которым загружается кошелёк. Кроме того, допустим, вы используете стандартный адрес с двумя разными кошельками. То есть,  вы создали два разных кошелька и передаёте стандартный адрес двум разным людям на два разных кошелька, и оба эти пользователя смогут сказать, что вы используете другой кошелёк, что вы создали новый кошелёк. Это не такой уж большой объём метаданных, и едва ли кто-то сможет сделать что-то с этой информацией, но всё же вы выдаёте эту информацию, поскольку стандартный адрес связывается с одним кошельком. Такой адрес назначается только одному кошельку.

Также перед пользователями ставится ещё один выбор: «Использовать ли мне подадрес? Или же мне стоит придерживаться стандартного адреса? Как мне быть?!» И вот небольшая иллюстрация, где один человек говорит: «Вот! Если мы украдём одну из этих машин, мы сможем добраться до базы и обезвредить бомбу! Та, что слева, разгоняется быстрее, но имеет меньшую скорость. А у правой хороший трекшн-контроль. Как там у нас с дорогами? Они мокрые?» Ну и соответствующий совет: «Если вы вдруг захотите одолеть меня, просто дайте мне два очень схожих варианта и неограниченный доступ к интернету». И это выбор между использованием стандартных и подадресов. Всё это довольно похожие варианты, и это навязывается пользователю, чтобы он думал и решал: «Должен ли я использовать подадрес в этом случае? Или же стоит воспользоваться стандартным адресом? Что мне делать в этой конкретной ситуации?». И это часть взаимодействия с пользователем, которой, на самом деле, быть не должно.

Идея Jamtis состоит в реализации первичного, основного адреса, то есть, единого метода создания адресов, и чтобы каждый из них не был отличим от другого. Таким образом, мы уходим от единого, стандартного адреса. Теперь будут использоваться только адреса Jamtis. А ещё одно огромное преимущество заключается в том, что вы сможете генерировать адреса Jamtis случайным образом в автономном режиме. И поэтому размер индексов адресов Jamtis должен составлять 16 байт, что также позволит поддерживать UUID для торговых систем, которые захотят их использовать. Но, по сути, у нас имеется достаточно битового пространства для поддержки случайной генерации адресов, и поэтому при использовании разных устройств и кошельков не придётся отслеживать, какой из адресов был сгенерирован на каждом этапе увеличения его номера. Каждый кошелёк сможет сгенерировать адрес случайным образом, и всё — вы сможете свободно использовать такой адрес. Также мы устраняем необходимость в предварительном просмотре, когда кошелёк генерирует тысячу подадресов, а затем хранит их в памяти и проверяет, какие средства получены и принадлежат конкретному диапазону подадресов, вместо того, чтобы сохранять данные такого предварительного просмотра, в результате чего пользователь может получить Monero на два подадреса дальше от этого диапазона, потерять средства или просто не увидеть, что их можно восстановить. По сути, в случае Jamtis вы можете просто расшифровать, какой адрес получил Monero в режиме реального времени. Таким образом, нет никакой задержки — вы будете точно знать, на какой адрес была получена конкретная транзакция.

Кроме того, адреса Jamtis также делают менее вероятным проведение атаки Януса, к которой на данный момент уязвимы подадреса, о чём уже упоминалось ранее. И, наконец, сам факт существование только одного типа адресов Jamtis означает упрощение процесса разработки. Если кошелёк будет поддерживать адрес Jamtis, необходимость в дополнительной поддержке, позволяющей убедиться, что кошелёк поддерживает адреса так же, как и другие кошельки, просто исчезнет. Такова основная идея.

Теперь поговорим о сертифицированных адресах. Опять же, сегодня существуют интегрированные адреса, которые удобны для предпринимателей, которые хотят использовать уникальные идентификаторы платежа для каждого заказа. Когда вы продаёте определённый товар, вы генерируете уникальный идентификатор платежа, прикрепляете его к адресу и к статическому адресу, который сможет увидеть клиент, который решит воспользоваться вашими услугами повторно.

И Сегодня существуют некоторые проблемы, связанные с интегрированными адресами есть проблемы. Во-первых, вы не сможете отправить в одной транзакции более одного интегрированного адреса — это невозможно. Поэтому если вы хотите отправить транзакцию адресом нескольким сторонам или на несколько интегрированных адресов, вам не повезло. Придётся создавать несколько транзакций, что довольно хлопотно. Также все транзакции имеют восьмибайтовый идентификатор платежа, который сохраняется в блокчейне. И это просто дополнительные восемь байт, которые включают в себя все транзакции в качестве идентификаторами платежей, что является просто лишней информацией, которая совсем не обязательно должна включаться в транзакции. Со всеми этими недостатками можно более подробно ознакомиться. Если перейти по указанной ссылке. Из-за подобных проблем ведётся активная работа, в результате которой должен произойти отказ от интегрированных адресов.

Сертифицированные адреса являются решением проблемы — они уникальны и позволяют генерировать уникальные адреса Jamtis, один и тот же тип адреса Jamtis, который затем подписывается одним приватным ключом. Такие адреса просто подписываются цифровым ключом как адреса Jamtis. Кроме того, пользователь затем может добавить RID продавца, идентификатор получателя, в адресную книгу, и будет точно знать, что после добавления этого продавца, по сути, после добавления «отпечатка пальца» продавца, любой платёж, отправленный продавцу в будущем, будет подписан сертифицированным адресом, будет подписан именно тем ключом, который имеется в адресной книге. Пользователь будет точно знать, что отправляет средства на правильный адрес, что также устраняет вероятность проведения атаки посредника, когда скрытый адрес может быть изменён каким-либо образом, но подписан известным адресом.

Теперь перейдём к идентификаторам получателя. Существует проблема, связанная с копированием, вставкой и последующей визуальной проверки адреса, позволяющей убедиться, что все символы были введены правильно. Это напрягает и явно не доставляет особого удовольствия. А большие адреса только ухудшат ситуацию. И мы предлагаем решение — идентификатор получателя, в случае с которым берётся хеш большого адреса и получается вот такая строка, выделенная оранжевым цветом. Она намного меньше, и её проще проверить. Таким образом, пользователь в своём кошельке будет видеть, что идентификатор получателя совпадает с тем, что отображается в интерфейсе предпринимателя в торговой точке. В этом и заключается идея идентификаторов получателей.

Теперь немного о генерировании ключа адреса. Сегодня с этим также связаны некоторые проблемы. Допустим, у вас есть торговая система, которая генерирует новые адреса и принимает на них средства. Для этого нужен сервер, который будет иметь доступ к приватному ключу просмотра пользователя, и этот ключ позволит видеть все входящие средства. Ещё одна проблема заключается в том, что интегрированные адреса, хотя интегрированные адреса не нуждаются в наличии приватного ключа просмотра, и с ними связан отдельный набор проблем, о которых говорилось ранее. Так что решение, предлагаемое Jamtis —новый ключ генерирования адресов, позволяющий исключительно генерировать адреса Jamtis, созданный специально с этой целью. Система будет использовать для генерирования адресов только этот ключ, которому не нужна никакая другая дополнительная информация, никакой другой приватный ключ просмотра или что-то подобное.

Ещё одной ключевой особенностью Seraphis является построение цепочек транзакций, решающее некоторые из существующих сегодня проблемы. В настоящее время невозможно предварительно подписать транзакцию. То есть, допустим, сегодня я хочу создать транзакцию, которая и потратить средства. То есть, я хочу создать транзакцию A, а затем я хочу создать транзакцию B, в которой будут потрачены средства из транзакции A, то есть, потратить Monero, отправленные в транзакции A. И я хочу создать обе транзакции одновременно, прежде чем отправить их в блокчейн. Сегодня это просто невозможно сделать. А без этой функции атомные свопы работают только в случае, если Bitcoin или Ethereum отправляются первыми. И протокол атомных свопов работает в настоящее время использует именно этот способ, и нам необходимо обойти это ограничение, что непросто. И построение цепочек транзакций — это та функция, которая необходима для того, чтобы Bitcoin мог передаваться первым. Это одна из основных возможностей Seraphis, которую можно реализовать, особенно с помощью модульного протокола транзакций, что было бы неплохо.

И ещё был вопрос, который задал articmine в отношени построения цепочек транзакций, когда я выступал с презентацией на конференции Monero Conf. Позволит ли эта функция сделать что-то похожее на схему «ребёнок платит за родителей», используемую Bitcoin? Это не совсем то же самое. У указанной схемы есть свои недостатки, которые не решаются построением цепочек транзакций. И я просто хотел уточнить это, потому что, как мне показалось, тогда я не дал чёткого ответа на вопрос. Так что, сейчас я просто уточняю эту информацию.

Спасибо, что выслушали, если кто-то действительно дослушал до этого момента. Обратная связь определённо приветствуется, особенно со стороны предпринимателей, всех тех, кто пользуется Monero. Сообщайте нам о любых слабых местах UX, которые были выявлены в Jamtis и Seraphis, то есть о том, что вам нравится или не нравится. Ещё раз: обратная связь более чем приветствуется. Вот несколько ссылок и каналов Matrix. Я не обновлял эту презентацию, и есть ещё несколько ссылок, которыми я хотел бы поделиться. В Matrix есть канал No Wallet Left Behind, и я размещу ссылку на него. Ссылка на канал будет публиковаться везде, где будет размещена эта презентация. Также вы можете посетить репозиторий, где размещаются результаты работой, связанной с переходом на новый протокол. Там же обсуждается уйма проблем, с которыми мы сталкиваемся. Работа координируется Рене Бруннером, и это ещё одно место, куда можно заглянуть и увидеть, как развивается работа на этом фронте. Так что мы обязательно включим эти ссылки везде, где будет опубликована презентация. Спасибо за внимание.
