# Amir Taaki

_**Amir Taaki - DarkFi: Anonymous Engineering for Dank Net Markets**_

_Monero Konferenco  #MoneroKon2022 Day 2_

[https://youtu.be/hEhXopfzY10](https://youtu.be/hEhXopfzY10)

---

_**Amir:**_ What is the darknet paradigm? This is agorism, the free market, economics, direct democratic economy, people’s economy. It’s actually the majority of the world’s economic activity — most of the world is not part of the western system or the established system of banks. For example in the Middle East people have a very strong moral community fabric, very strong alliances, like tribes and families, and all that kind of stuff. And that’s why States are very authoritarian, because they’re actually very weak, and people, nobody uses banks — there’s no people completely mistrust the banks, they use informal systems of Hawala money transfer. And interestingly now in Lebanon or the OTC shops are dealing with USD Tether on Tron Network. So you go and you can change USD Tether, and in Egypt the premium on USD Tether is 15 percent above the normal dollar. So if I sell USDT I get 15 extra in terms of dollar value. Very interesting cryptocurrency is.

And also the crypto anarchists, they believe that we could use these modern tools of cryptography to create dark spaces in the internet, like a forest, where like gorillas can move and make them hide, they’re defended by that nature. The system of authoritarianism, totalitarianism seeks to turn everything into desert, into a completely surveillable, visible space.

So we need to add distinction back to our geography on the internet, the way we do that is with cryptography. In particular now cryptography is having a Renaissance — there are a lot of new breakthroughs are happening in cryptography — multiparty computation, zero knowledge proofs, fully homomorphic encryption. Even if in terms of the mathematics a lot of very interesting theory on loan order groups, hyperelectics, devices all the things you can do with that. So I’ll never seen such a development in cryptography happening. And that is opening up — entirely new design space and applications that can be created that before was not possible.

And so also adding into this one side there’s a development of cryptography has advanced a lot, it’s a huge because of cryptocurrency has a lot of money going into cryptography research, so the tools that we have unlocking type in new design spaces, but the other thing is the government’s gearing up to regulate crypto. Right now USD Tether — they’re like a very dodgy stablecoin, backed up by questionable source of value, like the instruments and stuff. But essentially what they’re doing is they’re inflating the US dollar monetary supply within puberty. And that’s only a power that the central bank has. So crypto it’s a big threat to the dollar, the dollar as the system. Systems like, for example, DAO or Make a DAO, they are collateralized by “if which is a virtual currency in cyberspace to create more dollars out of thin air”. So that’s the main power of the central banks have over an economy is to allocate new credit, allocate that credit. And so that’s very threatening for them, also DeFi is very threatening, and also anonymous technologies.

So we have people instinctively now feel that there is a landscape is changing, and the gears that’s having where they’re going to try and heavily regulate Bitcoin or any SEC, or at least was serving many heads of DeFi  projects, like Pokemon even got set by the SEC. So crypto is going to split into two — there will be the completely bolted down unusable KYC, white side of crypto, which is what we call RegFi, and then the other side of that will be it will force the other side of that unencumbered side, underground will make it that’s what we call DarkFi. That’s the concept of DarkFi, which is the side of crypto that remain unregulated, and it’s forced to implement strong anonymous technologies too.

So Monero is like kind of like a cash, where it’s like the main value that’s transacted on the darknet markets. Like Monero have the community ethos, and they have the usage in the darknet markets. It’s kind of like this type of money, it’s like the equivalent of what Bitcoin is to Ethereum. And DarkFi is the applications layer which is what where applications will.

So there’s a new field that’s emerging, which is called “anonymous engineering”, and this is really new. This is what we’re conceptualizing now, like where we like try to build applications now, just in the process of building applications. We invent like new techniques or new constructions that we can use to build applications. As the field develops more, then these can be generalized so that people can, the experts to easily build applications.

So I just have a comparison like how does it differ between software engineering and cryptography engineering. It’s a cryptography engineering is the primitives that you create. So for example if I implement a new ZK algorithm or a new type of signature scheme. But the anonymous engineering, and software engineering is like running code that can pass to instructions, the anonymous engineering is: ok, I want to build an application, how do I use this cryptography techniques or these cryptography primitives to design schemas or design applications?

So the typical idea of a smart contract is you have a function and you like call it, you execute the function to change the state to something else. And everybody in the network performed that algorithm, that smart contract algorithm. But a ZK contract is different. When we’re working with anonymity, the information about yourself is completely hidden and private, so you don’t want to reveal that information. So the way that it works is you have a proof, somebody who proves something, you have a verifier, so I create a type of contract that specifies what those rules are, and then I create proof. When I give you that proof that proof say some statement about that secret data that I have without revealing what that secret data is. Like if I wanted you normally to reproduce that change in state, no matter you know, to execute that function then I would give you that data, and you just run that that function with that same data and see: oh yeah, they’ve got the same output, everybody would do that. With a ZK contract it’s different. Like I make a proof that something happened or about some relations between my data, and then I give you that, and then you verify that is correctly.

So for example… oh this is incorrect it says “anonymous form”, it should be “anonymous style”. So “anonymous voting”, so if to make a, for example, proposal I had to have a certain number of governance tokens. I can make a proof that the governance tokens in my wallet is bigger than the limit they’re set in the DAO. And both of these quantities are anonymous — nobody on the network can see this DAO, what’s  the parameter in the map, the DAO, and it was too thickered, was the minimum number of governance tokens that you need to make a proposal, and also they cannot see like: okay I meet the threshold, but they can’t see also what are the tokens in my wallet. So it’s completely anonymous. So the person verifying it, he can’t see any of those attributes, any of those values, but he sees the statement is valid, and so therefore in the state machine is updated and the proposal becomes live.

So okay I’ll just show you some example demo. I wanted to make an anonymous vote, then the way that I can do that is I can create a random serial number, and I don’t give the serial number to the network, I give a commitment to the serial number. So I do like an encrypted hash of the serial number, nobody knows what the serial number is, they just know that this is a new output. So for example if you’re starting a voting round, at the beginning people are like each person who has the rights to vote creates one of these commitments, and then after the commitments have been created you start the voting. And then people essentially burn each one of these commitments in an irrevocable way that you don’t know whose commitment corresponds to who. So you break the link completely. The way you do that is you create a zero knowledge proof, where you say they so, what they do is they publicly reveal the serial number which was inside of the encrypted hash, inside of the commitment, and you create a proof saying that: okay when we when we create encrypted hash up the serial number, which is deterministic, we get this coin, and the coin is in all of the set of all the, sorry, this commitment or commitment, we call that coin, is in the set of all the valid coins that were created at the beginning before the vote even began. And the way that you do that is of a Merkel tree.

So this is the burn operation or you could call a burn contract, and you see it saying it’s produced by its the actual code, we don’t reveal the serial number, we actually reveal what’s  called the nullifier, nullifies the serial number, so it can’t be reused, but you can see the public key derivation and hashing, that’s where you, puts down here, okay so this is where you create a coin or the commitment, but this is private, this isn’t perfectly revealed. And then we have the Merkle tree inclusion proof and then a Pedersen commitment.

So then this scheme can be generalized further to the payments. That coin value that we were talking about, you can essentially put any number of additional attributes inside of the coin, and then you can make statements about those attributes. So as opposed to a vote where you just make one vote per person or per whoever, with a coin you have a value of the coin. So if I send value to someone else, I’m not like sending the whole coin, I’m sending just a bit of it. So I can split the coin into two, like one that has gone back to my wallet, and one would go to them. So that’s why we can create a transaction, so this is the mint side of these. And then this is the burn side. Essentially very similar to the vote one, just extended. Now with this additional value which is the Pederson commitment of the tokens value. And then you can use that. So and then we talked about the value here as this attribute, but you can also put other attributes — token ID, you want to have multiple different tokens on the network, you can put up spend hooks, when it’s spent you also have to execute an additional smart contract, and then maybe that smart contract wants to store some data, there so you have user data.

And essentially if you have that as well you can create swaps, so you can create simple swaps between people, and so you have a transaction and that’s just very simple. There’s one person makes one input, another person makes the other input, and you both publish an encrypted hash of your public key. But then on the output it also checks it’s the same encrypted hash of the public key, so you don’t know what the public key is there’s an encrypted hash, but you do know that it matches. And then you have your state transition function, which the state transition function corresponds so on the function that’s called in the smart contract. You add an extra check that says that, for example, input one has the same public key as output one, that just that you could, because these are also both encrypted the amounts and the currency type, you just see that it’s that they correspond, because they’re on encrypted hashes. And you do the same thing up input two and output two as well.

So that’s a simple swap system and even these systems they can all be generalized to create anonymous style which we have like we work we have like first the schema worked out in inside of all the cryptography and ZK work outs, and now we’re building an application, next month we’re going to release a demo which is the same payment system that you have normally, you have multiple currencies, so you have a type of ID, and then you can have a normal currency or several currencies, and then also governance token for a DAO, and something mints a new DAO which is an encrypted hash, a bunch of attributes. So for example a proposal limit, there’s a minimum number of tokens to make a valid proposal, the quorum, which is what’s  for a vote to pass it has to have a certain number of votes, certain level of activity, and the approval ratio doesn’t mean 55 or 70 threshold for about to pass, eight percent, so then people can send funds to the DAO, and when they send the funds to the DAO, they spent hook that I talked about earlier, it involves it has another contract linked to it, says additional conditions you need to spend from the dial, and they make a proof that says my governance tokens is more than the limit needed to make a valid proposal for the DAO, and the proposal just for now it’s very basic but it could be more complicated things but right now it’s just says like are this proposal transfers X funds from the DAO treasury to this key, and then everybody submits encrypted votes, and then at the end of the voting period the votes are summed together using a, because they were encrypted, you don’t have them normally, but there there’s a type of mathematical encryption where you can add them all up together and then what a proof of a successful vote is submitted to a blockchain, and so then that allows that unlocks those funds in the DAO to be sent to just that one public TP according to the proposal. So you essentially have anonymous DAO.

And because we didn’t want to lose like our community to, sorry, it’s a Discord and stuff like that, we made our own anonymous peer-to-peer chat system which is part of the DAO tooling. Sorry, I’m going full screen, okay, so you can see here it’s just starting these peer-to-peer IRC nodes they’re pet no sorry our peer-to-peer network. But it has it has a local Daemon for IRC and then you can connect to any IRC column, and you can chat to each other peer-to-peer. And so that way there’s like nothing no information locked anybody can change their nick and stuff like that.

So that’s and also we really dislike how like projects get captured by GitHub, and they give all their data to Microsoft. So we create our own peer-to-peer task system so we can all run these nodes and it’s sync between each other, and then we can, if any of you have used Taskwarrior, it’s a similar kind of system you know where people can submit tasks, you can assign them to certain people, you can put due dates, you can put, you can add annotations, you can start them you can pause them, you can stop them like all the functions, they have ranks, so levels of importance and priority, all that all that kind of stuff.

So that that’s part of our DAO tooling. And then, so then, okay, so any people should go look at this article on Ego Capital if you go to their writing section called Lunar Punk in the dark side of the cycle. There’s what we call the dark cycle thesis, which is why I alluded to earlier with RegFi and DarkFi, where there’s this bifurication happen. The thing is that the people who try to seek regulation is the as soon as the regulators hit back on them, it shatters their narrative, they lose strength, they lose power. Whereas in our case we say: oh look, the government, we provoke the government, and it causes the government to like react strongly against us. But then it galvanizes our cause. We say: look this is what we are saying is happening, so actually strengthens us, that’s an example of an anti-fragile narrative. And like now this is like what we see happening with the stance governments taking towards crypto. This is the bookcase for Monero and in particular like we reinforced each other’s strength. So what right now in terms of like we have our projects and stuff that’s a hedge against staff — I’m buying a lot of Monero, because that’s every time that we see, we like push this narrative, we also see Monero comes as well. So it like strengthens the communities. So check out that article. Thanks very much everyone.

_[Applause]_

Oh yeah, by the way, there’s a lot of stickers and stuff now if anybody can come up right now and take some, please take some. They’re like glow in the dark.

_**Audience:**_ I just would like to have maybe a naive question is about why you are using a homomorphic encryption when you pass the parameters inside of this time, why you are not using full amount of people?

_**Amir:**_ Yeah we’re going to use for homomorphic encryption in fact, you can actually do approximation for homomorphic encryption by attaching like a multiplication proof as well. So then you have addition and multiplication you can do all the you can do anything complete function. But right now we just use a Pederson commitments, because we just need to sum the values for the inputs and outputs, fully homomorphic encryption algorithm. Do you recommend which do you recommend any algorithm?

_**Audience:**_ Not in particular but I would like to know your suggestion and what you expected, which you feel better instead of using this parameter that you are using.

_**Amir:**_ It’s like, it’s not like one tool, it’s like lots of different tools that have different properties and different pieces and how you combine them to create an application. So for example like multiply computation, it’s very useful because you can plug a smart contract. Like in if for example you have this concept where smart contract sometimes you need to update your state, and this but the state to be updated, it needs to know some information and usually those promises are public in an anonymous system, how do you do that, and you have a bunch of nodes that they don’t know the information themselves, but that they can compute a function on that data, which is distributed between them. So then you can for example see in a market if somebody gets liquidated, or if you need to update the state of some parameter etc. And it happens also could be used auditing as well. It’s interesting as well. So use for example ZCash when they deploy the new Zk-algorithgm, Halo 2, they tried to put everybody has to first go for a transparent address to get into the new system, just so you can see all the coins become transparent. But a lot of people criticize that because it’s like: oh, you’re forcing everyone to be anonymous set coins. But you could use NPC to solve that for example instead of it just being made public as you spreads over the several months it will have partial information.

_**Audience:**_ Okay thank you.

_**Moderator:**_ Any other questions.

_**Audience:**_ So it started to feel like a protocol or, because it’s not like its own blockchain, right?

_**Amir:**_ No we have our blockchain. We’re developing anonymous blockchain, like right now we have just a simple streamlab implementation, but there’s we’re working on another blockchain consensus algorithm which is fully anonymous has like anonymous leaders, anonymous thinking.

_**Audience:**_ Cool.

_**Moderator:**_ Maybe one last question.

_**Audience:**_ So you with DarkFi, when you take a coin from a transparent chain and then you darken the coin, right, and then you send it to the Cashera, I know those are like centralized now but you have applied to decentralize them right? But are the addresses that you send the coin to are they linkable to the DarkFi projects like if you like an outside actor where to look at the address?

_**Amir:**_ Yeah so I think that’s a mistake. So a lot of projects or websites got coins blocked someway, and I mean that’s because they’re like allow their addresses to be linked. I think we have to just create new addresses per person that are completely private between the two parties.

_**Audience:**_ Yeah, okay, thanks.
