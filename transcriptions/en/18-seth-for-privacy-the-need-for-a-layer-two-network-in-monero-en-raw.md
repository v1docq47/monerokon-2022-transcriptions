# Seth for Privacy

_**Seth for Privacy - The Need for a Layer-two Network in Monero**_

_Monero Konferenco  #MoneroKon2022 Day 2_

[https://youtu.be/9XVMUVvwxUE](https://youtu.be/9XVMUVvwxUE)

---

_**Seth:**_ This talk will be about how a simple layer 2 network could be beneficial to us in the future. So very simply, if you don’t know who I am, I’m Seth for Privacy, it’s kind of a handle I go by. I’ve been a Monero contributor for a couple years mostly in non-dev related way, not within the code base, but trying to build out guides, tools that simplify running Monero software. This favorite thing I can with my specific skills to help out with the Monero project. And then outside of that I’ve been focused on the broader, general, the broader personal privacy space by building out pro-privacy content, education guides and then a podcast called “Opt Out” that focuses on personal privacy, but also cryptocurrency quite heavily and the privacy implications there.

Very quick intro to kind of why I chose this topic. I think it’s one that we don’t talk about too much in the Monero community. Obviously we’ve taken very different approaches to layer 1, to the scalability of the base chain, to privacy on the base layer. And so we haven’t had the pressing need for a layer 2, like Bitcoin, and then obviously our usage is less than Bitcoin right now. We usually like 10 to 13 of the daily transactions of Bitcoin. So there has been a lot of discussion around what a layer 2 ever could bring or what it could look like even in reality. So there have been some fascinating research articles, which we’ll briefly touch on at the end, but I really wanted to just more broadly look at the concept of what a simple really Lightning-like payment channel network would look like for Monero, and how it could benefit us specifically. And a lot of this comes on the back of me doing a very deep dive down the rabbit hole the Lightning Network and try to figure out what are the pros what are the cons, what are the approaches that have been taken, and what’s been kind of had to be baked into Lightning Network to solve some of the Bitcoin’s problems. So we’ll dive into a lot of that as well.

So the first main reason why Monero would benefit from a layer 2 is actually privacy. And something that we obviously focus on within the Monero community and the project itself is strong user privacy without extra hoops to jump through. And the base layer achieves that very well, obviously it’s extremely effective especially against mass surveillance or general surveillance, and that is a tool that will continue to work, it will continue to iterate and improve, and that base layer of privacy is incredibly powerful. But the drawback is when you transact on Monero base layer, you publish a transaction that will exist forever, hopefully, if the Monero continues to run forever. And while that’s not a bad thing today, that data that you publish may be in some future case they could break a specific thing that was done in Monero today, 20 years down the line maybe, when quantum computers could have an impact, there are a lot of ways where if you’re storing this data forever, at some point there could be a tracing breakthrough or something, where they could use that data. They can easily access and then start tracing funds that were sent a decade ago or whatever it may be.

So a payment channel network like the Lightning Network brings privacy via ephemerality, in that you simply open a channel with maybe, for instance, you’re here, you open a channel with far, when you get here, and then you can send transactions back and forth, and then when you go to leave, to go back home, you can just close that channel. No one knows about those transactions that you sent and received. No one sees any details of them. No one could possibly surveil them, even actively, if it’s a direct channel. There would be no way for them to surveil that. So all of those transactions then are not traceable in the future, no matter what approaches are taken there. That data is not published. So gain a lot of privacy via that ephemerality, and you defeat this concept of passive surveillance, where people can just scoop up data, and then a decade down the line try to find some way to use it.

The other main one is obviously you reduce some metadata that you would see on chain, and you’re not having even stealth addresses, you’re not having any of the output information that you would normally have on the base layer, because again it’s happening in this payment channel — you’re closing it and none of the details of the transactions are being published on chain.

The other main benefit that you get from a layer 2 network like this is that the actual payment experience just gets a little bit cleaner. Obviously this example is much less complex than the Lighting Network, so the routing and payment reliability issues of the Lightning Network wouldn’t apply here, in the kind of proposal that we’ll walk through. But one of the benefits of something like that is you get at least the sense of instant finality. Finality is complex, but you get the feeling of when you send a transaction in a layer 2 network like this, the merchant sees it instantly, they have some guarantees of finality instantly, and you can just move on. So like for instance at the bar — instead of them having to wait for the transaction to propagate and then deciding if they wanted to do zero conf or one conf, or what kind of threat model they want to approach it with, they see that it’s finalized directly to them immediately, and you can just move on. So it greatly simplifies that commerce experience and e-commerce experience, because the actual process of buying or selling something is much quicker than doing it on chain.

And then the other one is really that the unique approaches taken to the Monero base layer improve the ability to use the layer 2 network. You can very quickly and cheaply onboard and offboard from that layer 2 network, if you, for instance, you come here, you open a channel, and then you’re only going to keep it open for a few days, which if you did that on Bitcoin would be probably a very bad idea from a feed perspective, so you’re going to open a 50 dollar channel, and they’re going to close it and depending on fees, maybe you pay a dollar, maybe you pay five dollars, maybe you pay twenty dollars to close the channel. And within the Monero network obviously you could close that channel very cheaply. Maybe a few cents at most, probably a lot less than that. So you gain a lot of those benefits that come up from the approaches we’ve taken to the base layer on this layer 2 network.

One of the main things about diving into the Lightning Network recently is just trying to be able to step back, take a look and see what Monero could benefit from, what we could learn from Lightning Network and change about how we approach it. One of the key things that we’ve seen in the Lightning Network for Bitcoin is that it inherits all of the privacy and scaling issues of the Bitcoin base layer. So one of the key problems with the Lightning Network is that when you open a channel, when you tell anyone about your node, they can very quickly see the UTXOs for that specific channel, for any others that you’ve announced, they can do channel probing trying to figure out what other UTXOs you have. And obviously within Bitcoin if I know your outputs, I can see obviously the amount of that, I can try to trace it back through your wallet to see, what exchange you bought it on, I could get a lot of information from that. And that bubbles up to the layer 2 network in the Lightning Network and it causes a lot of privacy issues there.

And then the other key one is that because Bitcoin has this arbitrary hard cap, it’s actually very hard to onboard a lot of people onto the Lightning Network. You will never onboard like the world’s population onto the Lighting Network, because of the arbitrary hard cap there.

Another key thing that I’ve learned from Lightning is that I think a lot of the complexity and the problems that they face with the Lighting Network come from this over-reliance to fix the two key issues with Bitcoin which are scaling and privacy on the second layer. And so when you have this task of trying to fix two very big, very problematic issues, it makes you create a very complex tool. And ultimately Lightning has most of its problems, because they’re trying to do things that are often at odds with each other, which is privacy and then scaling — it’s very hard to do like payment reliability well while preserving privacy. If you want to route across the Lightning Network, for instance, you need to know every route in the Lightning Network, need to know their balance, and you need to know who they’re connected to. So you reveal a lot of information just to be able to do that, which then reveals works privacy. And then you try to fix privacy, return payment reliability, and you keep kind of going down the circle. And that complexity is only brought because they need to try to solve these in other ways, because they’re the base layer itself has these problems.

And then the third one, because of the scalability of Bitcoin, and ultimately fees that are seem to be high long term, most likely, obviously that’s not clear right now, but they need to be able to move the majority of payments off chain. So again they bring a lot of complexity, because they’d be able to pay anyone anywhere, they don’t just need direct channels to emerge to use frequently, I need to be able to pay some random person on the Lightning Network. So that I don’t know a route to and be able to do that in a seamless way, which brings a lot of complexity there as well.

So how does Monero’s approach to layer 1 actually bring unique benefits to a layer 2 network like this. Ultimately obviously, we’ve talked about, we take a very different approach to Bitcoin. And the privacy issues that we see bubble up from Bitcoin to the Lightning Network. Don’t bubble up if we build a similar network on top of Monero. For instance, even in a worse case, and the idea I have for a layer 2 network this wouldn’t even apply, but even in the worst case, where someone knew about your channel, and they were able to even see the transaction output that was used to open that channel, they gain practically no information about you, about your other channels, about your other behavior, about the amount in your wallet, nothing like that. So you gain a lot of privacy on the layer 2 network from this space privacy that we all know and love with Monero itself.

The second main thing is that if someone even does know about that payment channel, they gain very little information. And then another key is that we have the social consensus, we do hard for us to upgrade the network or varied layer focused on privacy, and that’s fungibility, so we want to make sure that everyone using the Monero network gains strong privacy. And because of that we also have the power of that social consensus to ensure that if we take an approach to building a layer 2 network, we can make sure, that the way that we do that doesn’t harm the fungibility of people, who choose not to use that layer 2 network. So we want to make sure that things like opening channels and closing channels don’t actually affect the privacy of other people by making those transactions stand out on chain.

And then the last one, I think, one that’s most interesting to me, is we don’t have a pressure to move everything off the base layer. There’s not this need to be able to do all transactions on layer 2 network. I think we’ll be able to transact on layer 1 for a very long time, maybe forever, with relatively low fees. We have a lot of unique things in place, like the tail emission which allows us to have an inverse relationship to usage with fees. So the more Monero used, the more people sending transactions, the cheaper your fees and minor terms. And because of these approaches we really can have a much more optional, much more — you choose the route you want to take, with whether you use a layer 2 or whether you just stick to layer 1. You don’t have to move things off chain, and so that gives again a lot more flexibility with the approaches that we’ve made here.

So ultimately how I see that we should differ from the Lightning Network. Is again that we can really reduce that complexity and build this network that’s very simple, that’s very approachable, it would be easy to manage, but you gain a lot of the same benefits. And the first key difference is that we don’t take an approach like Lightning Network, where I want to be able to pay any one of you via a Monero’s layer two. I only want to worry about paying people that are like repeat merchants. I have a coffee shop down the street, I go there all the time, they accept it. Maybe I have a group of friends who we go to eat a lot we always pay each other Mac and Monero. So we just open channels to each other, so we can send Monero back and forth that way rather than doing it on chain. Or maybe you have something like Coincards, where you constantly are using it for gift cards. Why do all of that on layer one then you can just open a channel with them, do it all, have zero fees and have those extra privacy benefits, scaling benefits etc. So ultimately my vision for a network like this is you really only use it for these repeat merchants, and then because of the beautiful use case of Monero’s layer one, anytime if I go to a coffee shop for the first time and they accept Monero, I just pay them on the base layer, I’m not going to worry about it — fees are low, privacy is great. I’m not going to be concerned that I’m not able to use the layer 2 network. I’m not going to have to pressure them into accepting it and setting up a node, and doing all these things, if they accept Monero, if I can just be on the base layer and still reply. And that ability I think is what enables us to take a much simpler and much more useful approach to layer 2 networks within Monero. And again all this is possible because of the approaches that have been taken on layer one that enable us to as we grow, as we get more payments, as we get more usage, we’re able to actually build out a layered approach, like bitcoiners love to talk about, a layered approach that does things that we need. We’re able to actually do it in a way that doesn’t suffer from all of these problems that we haven’t addressed on the base layer.

And then the last way that we should differ from the Lightning Network, and I actually realized that we don’t need almost any of the privacy things that they’re working on in this specific approach. The only tool that we need here, and this is getting into the weeds of Lightning Network, the only thing we actually need that’s in that last bullet point is alias SCIDs, which is just basically when you open a channel with someone, you would have a unique node ID, so they wouldn’t be able to link your channel back, if you use like, say, you’re connected to Kraken, which obviously has your ID, and you connect it to, we’ll either just use the example of a darknet market, you wouldn’t want them to know that you’re the same person if you’re connected to both. So alias SCIDs mean that anyone you open a channel with, they see you as a brand new node, they can’t see any other channels, they can’t link you back due to a reused alias or anything like that. But the other things we actually wouldn’t need at all in this proposal, because we wouldn’t be doing routing at all, and for anyone who knows the Lightning Network routing is the biggest pain point within the Lightning Network, but it’s also a necessary one when you get to pay anyone. So if we can do away with routing and I really do think we can we actually don’t need many of the complex privacy improvements that they’re working on there.

A very quick look at the current approaches that have been developed for doing this type of network on Monero. So there actually has been some great research into building payment channel networks for Monero, and these get tricky, because in Monero we don’t have a scripting language. We can’t do something like in Bitcoin, where they use hashed time lock contracts or point time lock contracts, to develop a simple script that essentially lets you open this channel, but then also handle a dispute, like if the other person on the other end of the channel is malicious or they just go offline you need a way to get the funds back obviously. But within Monero we can’t do something like a hashed time lock contract or a point time lock contract, because we don’t have a scripting language. So it gets a little trickier to actually do a network like this. Thankfully there have been some very interesting research proposals on how it could be done. I’ll just quickly hit on each and some of the high points, but if you want to read through these, I assume slides will be available — these are all hyperlinked, so you can just jump right into them from that.

But very quickly — PayMo and Sleepy Channels were two of the first proposals for how to approach this. One more quick disclaimer — all of these currently rely on transaction chaining, which you also can’t do in Monero right now, but you will be able to do with Seraphis in all likelihood. The current proposal for Seraphis as an upgrade includes transaction chaining, which would enable all of these approaches. There’s also a caveat to that which Luke wants me to mention, which is that the “Universal Atomic Swaps” paper actually proposes a way that you could do this type of network on Monero, but since we’ll have transaction chaining, I think, that will be a better approach in the future. So PayMo and Sleepy Channels were the initial proposal. They actually use a form of limited time channel, where you open a channel, but it can only be open for a certain amount of time, and as you get closer to that time limit, the person on the other end essentially could try to do a form of proof of work to get access to the key and close the channel with the funds being there at the end of it. So it has a very big caveat that if you leave a channel open for the max duration, you risk losing funds and there’s a lot of complexities in how it actually works. So I think it’s a pretty problematic approach. I don’t think it’s something we would use in the future, but it was an interesting way to do it again without a scripting language, still a way to do that. Sleepy Channels just enable bi-directional channels. So I can open a channel at the bar and they can pay me back or refund me, or like if I’m paying back friends back and forth, it can go both ways.

Universal Atomic Swaps touched on a little bit already, let’s get that one for now. And then the two most recent proposals are AuxChannel and MoNet which are by the same authors, and it’s an approach that’s I think really fascinating. Essentially what you do is, because we don’t have a scripting language in Monero, you build very simple payment channels, and when you exchange keys, you build the normal stuff and opening a channel. But you actually have each person whose counterparty in that channel sends their key to a key escrow service. And this key escrow service would not be centralized, it would be something like that Ethereum smart contract, it could be a Bitcoin script, there are a lot of different ways you can approach it. It’s a very generic way to do things. But essentially what happens is if the channel is working well you don’t have a time limit on like PayMo, you can keep the channel open forever if you want, and if someone, if one party goes offline or if they’re malicious and they’re trying to steal funds and you need to go close the channel, you actually can go to the key escrow service, prove the fraud or the malice, or the offline status of the other party, and the key escrow service will then give you the key that you need to be able to close the channel uncooperatively. So this lets you do the same type of approach that’s in Bitcoin, but instead of relying on like in Bitcoin, they rely on Bitcoins base layer to handle the scripting, you would use something in Monero, that’s an external service again, like an Ethereum smart contract or something like that.

So those are very fascinating, I need to dig in more to those. MoNet came out like five days ago, and I learned about it two nights ago from Luke. These are very cutting edge, and it’s great to see that there are researchers working on this type of proposal. I have no idea why none of them ever reach out to Monero devs or researchers, or anyone. So a lot of the things that were taken here assumed that we had transaction chaining, but we don’t. So it’s interesting that they do all this research, and like a great research, but just choose not to talk to the Monero community. So hopefully that will change in the future as people start to understand how big the Monero community is.

Okay that was a run. I have no idea how much time I used, but quick conclusion just that we can build a very simple layer 2 network based on essentially the Lighting Network, and do so in a way that removes the complexity of the Lightning Network, removes the privacy flaws of the Lighting Network, and benefits from the unique approaches that we’ve taken to the base layer within Monero. And ultimately the takeaway I want for you is just to be thinking about this, as we see proposals and see research papers, as maybe we see CCS funding requests in the future or something around this, just think about how this could be helpful for you individually. Think about how you may want to use a payment channel network in the future to be able to transact with no fees, with better privacy and morality etc. And then if you’re a researcher or dev, maybe consider exploring and digging into these papers, maybe writing your own, maybe writing up a proof of concept of one of them, and just helping us as a community explore this topic in the future, and see if it is the right path, I think it is forward, or just go ahead and shoot it out of the water. Hopefully enough.

Very last slide. If you want to get in touch, there is my contact info. Feel free to reach out over any of those methods, I’d love to chat more about this. I’m not sure if you have time for questions?

_**Audience:**_ I have a question in terms of making layer 2 network easily accessible and not confusing and less tech savvy in Monero. So you see any problems with let’s put it up to be unaccessible?

_**Seth:**_ So one of the beautiful things of how we can approach it within Monero is that we can make it very optional. So it’s not like within Bitcoin where people are slowly being forced to use  if they want to spend Bitcoin. I mean there are lots of point of sale systems that are Lighting only. So like when I went to Miami for Monerotopia, I went to a taco shop that was theoretically selling tacos for Bitcoins, but they only accepted Lightning Network, and I have nothing on Lightning, so I couldn’t pay them, which is a weird experience, and obviously that’s problematic. So that’s why I envision this as a very optional thing that merchants can opt into, people can opt into. And I mean it would require extra complexity. You would have to run one extra piece of software, you would have to run something like a Lightning node. But again it would be very simple, I think, we could approach it with a very simple user experience, because you don’t need to worry about routing and all these other things that greatly complicate the Lighting Network, but it would add a little complexity for those people, who choose to use it over just regular base layer payments. And that’s why I’m glad this is Monero, and we can just keep doing base layer payments for people who don’t want to deal with the complexity, and we don’t even try to force everyone to use it. What other questions do you have?

_**Audience:**_ How would you envision the hook between the layer 2 and the Monero wallets, how the process will come?

_**Seth:**_ Yeah, I think ultimately it would be very much like Lightning, where you essentially lock Monero into a channel. So these the specific latest proposals are all bi-directional. So like we’ll use the example of a friend — we go eat a lot together, I constantly paying back in Monero, it pays me back in Monero when I pay. So because we do that, what we would do is we’d say like, what’s the normal amount we spend at dinner let’s say 50 bucks, so I would lock 50 of Monero into the channel, he would lock 50 or more onto the channel, and then we could send that money back and forth as many times as we want, I mean infinitely, if we didn’t close the channel, and if we never needed them out higher than that. And so you would lock those funds into that payment channel. And then that the exact way that you would handle a malicious counterparty is unclear still, I mean one of those is that that key escrow service that something off-chain, Ethereum smart contract, Bitcoin script could even just be something, I don’t know if you could do something like that. We need some kind of way to handle that problem, but yeah, something like that. And then that would allow you if the other party was malicious or would offline, if your friend just decided: I don’t want to do Lightning, I don’t want to do Monero’s layer 2 anymore, you could still close the channel without his cooperation. But it’s a simpler process than something like a zero knowledge roll up as a layer 2 or something like that, because you don’t have two types of funds and different validators and a whole other consensus method. You essentially just have a contract between you and the channel party, and then the amount of funds that you’ve chosen to lock into that.

_**Audience:**_ I’ve heard that Monero has like this TX extra field, can this be used in any way or like I don’t know signatures or some kind of mechanism to get experience the scripts in Monero?

_**Seth:**_ That was actually just brought up to me right before I came on. I haven’t looked into scripts at all. I my very limited understanding was that they relied on some kind of a time lock, which we don’t really have within Monero. So I’m not sure if it’s possible, if it is that would be ideal. I mean we were talking at dinner last night about changing TX extra to a separate field that has validation limits and stuff like that. But the same concept I think will happen in Monero in a long time. So it’s certainly possible. The hard part is you need some sort of scripting language or something like that the base layer itself can interpret. And obviously that’s a big leap from where we are right now in Monero. So I think most of the proposals focus on that not happening, but I need to dig in more scripts and see, if that’s something that we could do within Monero, because if you could do some even just very basic scripting you could probably do a much simpler approach to that. The only problem within a network like this is you need to handle when the counterparty is malicious or goes offline. So other than that like Monero we can handle that today that’s not a problem. But you obviously need a way to get your funds back if the other person’s malicious. So if we could do that with something like scriptless script directly on the Monero’s base layer, that would absolutely be ideal. Awesome. Thank you.

_**Audience:**_ […]

_**Seth:**_ The key problem is we never had it, so that would be something entirely new that would have to be developed. And then I guess that’s question number one. The other one is that you risk harming fungibility. And even in like the case of Taproot, which theoretically enables fungible scripting within Bitcoin, in the specific case that you need here in Monero, you need the ability to uncooperatively close the channel. You actually have to reveal the script and then taproot. So if there was a way to do scripting that did not reveal that information on chain, and that did not make your specific transaction stand out as a channel open or close, and specifically if it didn’t reveal information about that channel being open or closed, yeah I mean, I think, that would be great if we could have just a very, very simple scripting language. But that’s certainly not an area of expertise, I just know that there are those key issues with it right now, but it would enable a lot of other things.
